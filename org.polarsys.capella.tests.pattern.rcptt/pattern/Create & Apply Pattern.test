--- RCPTT testcase ---
Format-Version: 1.0
Element-Name: Create & Apply Pattern
Element-Type: testcase
Element-Version: 3.0
External-Reference: 
Id: _KqPLQJ2_EeWnS4S9Sm9aNg
Runtime-Version: 2.0.0.201506042314
Save-Time: 6/15/16 9:58 AM
Testcase-Type: ecl

------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa
Content-Type: text/plain
Entry-Name: .description

This step simulate the creation of the sample pattern used in the other test case.
------=_.description-216f885c-d591-38ce-8ea2-e4f8cb4d6ffa--
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac
Content-Type: text/ecl
Entry-Name: .content

get-view "Capella Project Explorer" | get-tree | get-menu "New/Capella Project" | click
with [get-window "New Capella Project"] {
    with [get-editbox] {
        set-text patternProject
    }
    get-button Finish | click
}

get-view "Capella Project Explorer" | get-tree 
    | select "patternProject/patternProject.aird/patternProject/Logical Architecture/Logical System" 
    | get-menu "New Diagram \\/ Table.../Logical Architecture Blank" | click
get-window "New Logical Architecture Blank" | get-button OK | click


with [get-editor "[LAB] Logical System"] {
    with [get-diagram -index 1] {
        with [get-edit-part -name "[LAB] Logical System" | get-edit-part 
            -name "Logical System" | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart] {
            mouse-move 72 54 button1 -height 68 -width 148
            mouse-press 72 54 button1 -height 68 -width 148
            mouse-release 72 54 button1 524288 -height 68 -width 148
        }
        with [get-figure "0/1/0/0"] {
            mouse-move 154 76 button1 -height 281 -width 600
            mouse-press 154 76 button1 -height 281 -width 600
            mouse-move 155 77 -mask 524288 -height 281 -width 600
        }
        with [get-edit-part -name "[LAB] Logical System"] {
            mouse-drag 570 224 button1 524288 -height 281 -width 600
            mouse-release 570 224 button1 524288 -height 281 -width 600
        }
    }
    with [get-palette | get-palette-entry "Logical Component"] {
        mouse-move 75 19 button1 -height 37 -width 125
        mouse-press 75 19 button1 -height 37 -width 125
        mouse-release 75 19 button1 524288 -height 37 -width 125
    }
}
with [get-editor "[LAB] Logical System"] {
    with [get-diagram -index 1 | get-edit-part -name "[LAB] Logical System" 
        | get-edit-part -name "Logical System" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        mouse-move 41 64 button1 -height 221 -width 561
        mouse-press 41 64 button1 -height 221 -width 561
        mouse-release 41 64 button1 524288 -height 221 -width 561
    }
    with [get-diagram -index 1] {
        key-type F2
        get-edit-part -name "[LAB] Logical System" | get-edit-part -name "Logical System" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC 1" 
            | get-edit-part -className DNodeContainerName2EditPart | activate-direct-edit
    }
    with [get-editbox] {
        set-text "LC A"
        key-type Enter
    }
    with [get-diagram -index 1] {
        commit-direct-edit
        key-type Enter
    }
    with [get-palette | get-palette-entry "Logical Component"] {
        mouse-move 53 15 button1 -height 23 -width 141
        mouse-press 53 15 button1 -height 23 -width 141
        mouse-release 53 15 button1 524288 -height 23 -width 141
    }
    with [get-diagram -index 1 | get-edit-part -name "[LAB] Logical System" 
        | get-edit-part -name "Logical System" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        mouse-move 303 59 button1 -height 221 -width 561
        mouse-press 303 59 button1 -height 221 -width 561
        mouse-release 303 59 button1 524288 -height 221 -width 561
    }
    with [get-diagram -index 1] {
        key-type "M2+l"
        get-edit-part -name "[LAB] Logical System" | get-edit-part -name "Logical System" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC 2" 
            | get-edit-part -className DNodeContainerName2EditPart | activate-direct-edit
    }
    with [get-editbox] {
        set-text "LC B"
        key-type Enter
    }
    with [get-diagram -index 1] {
        commit-direct-edit
        key-type Enter
    }
    with [get-palette | get-palette-entry "Logical Function"] {
        mouse-move 33 13 button1 -height 23 -width 125
        mouse-press 33 13 button1 -height 23 -width 125
        mouse-release 33 13 button1 524288 -height 23 -width 125
    }
    with [get-diagram -index 1 | get-edit-part -name "[LAB] Logical System" 
        | get-edit-part -name "Logical System" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC A" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        mouse-move 15 30 button1 -height 68 -width 148
        mouse-press 15 30 button1 -height 68 -width 148
        mouse-release 15 30 button1 524288 -height 68 -width 148
    }
    get-diagram -index 1 | key-type "M2+l"
    with [get-editbox] {
        set-text "LF A"
        key-type Enter
    }
    with [get-diagram -index 1] {
        commit-direct-edit
        key-type Enter
    }
    with [get-palette | get-palette-entry "Logical Function"] {
        mouse-move 43 11 button1 -height 23 -width 125
        mouse-press 43 11 button1 -height 23 -width 125
        mouse-release 43 11 button1 524288 -height 23 -width 125
    }
    with [get-diagram -index 1 | get-edit-part -name "[LAB] Logical System" 
        | get-edit-part -name "Logical System" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        mouse-move 14 28 button1 -height 68 -width 148
        mouse-press 14 28 button1 -height 68 -width 148
        mouse-release 14 28 button1 524288 -height 68 -width 148
    }
    get-diagram -index 1 | key-type "M2+l"
    with [get-editbox] {
        set-text "LF B "
        key-type Enter
    }
    with [get-diagram -index 1] {
        commit-direct-edit
        key-type Enter
    }
    with [get-palette | get-palette-entry "Logical Function"] {
        mouse-move 57 10 button1 -height 23 -width 125
        mouse-press 57 10 button1 -height 23 -width 125
        mouse-release 57 10 button1 524288 -height 23 -width 125
    }
    with [get-diagram -index 1 | get-edit-part -name "[LAB] Logical System" 
        | get-edit-part -name "Logical System" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        mouse-move 82 35 button1 -height 86 -width 148
        mouse-press 82 35 button1 -height 86 -width 148
        mouse-release 82 35 button1 524288 -height 86 -width 148
    }
    get-diagram -index 1 | key-type "M2+l"
    with [get-editbox] {
        set-text "LF B 2"
        key-type Enter
    }
    with [get-diagram -index 1] {
        commit-direct-edit
        key-type Enter
    }
    with [get-palette | get-palette-entry "Functional Exchange"] {
        mouse-move 64 10 button1 -height 37 -width 125
        mouse-press 64 10 button1 -height 37 -width 125
        mouse-release 64 10 button1 524288 -height 37 -width 125
    }
    with [get-diagram -index 1 | get-edit-part -name "[LAB] Logical System" 
        | get-edit-part -name "Logical System" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        with [get-edit-part -name "LC A" | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart 
            | get-edit-part -name "LF A" | get-edit-part -className SquareEditPart] {
            mouse-move 30 19 button1 CTRL -height 50 -width 50
            mouse-press 30 19 button1 CTRL -height 50 -width 50
            mouse-release 30 19 button1 786432 -height 50 -width 50
        }
        with [get-edit-part -name "LC B" | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart 
            | get-edit-part -name "LF B " | get-edit-part -className SquareEditPart] {
            mouse-move 13 22 button1 -height 50 -width 50
            mouse-press 13 22 button1 -height 50 -width 50
        }
    }
    with [get-diagram -index 1] {
        get-edit-part -name "[LAB] Logical System" | get-edit-part -name "Logical System" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part 
            -name "LF B " | get-edit-part -className SquareEditPart | mouse-release 13 22 button1 524288 -height 50 
            -width 50
        key-type "M2+f"
        get-edit-part -name "[LAB] Logical System" | get-edit-part -name "Logical System" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part 
            -name "LF B " | get-edit-part -name "FIP 1" | get-target-connection 0 | get-edit-part 
            -className DEdgeNameEditPart | activate-direct-edit
    }
    with [get-editbox] {
        set-text "FE AB"
        key-type Enter
    }
    with [get-diagram -index 1] {
        commit-direct-edit
        key-type Enter
    }
    with [get-palette | get-palette-entry "Functional Exchange"] {
        mouse-move 50 14 button1 -height 37 -width 125
        mouse-press 50 14 button1 -height 37 -width 125
        mouse-release 50 14 button1 524288 -height 37 -width 125
    }
    with [get-diagram -index 1 | get-edit-part -name "[LAB] Logical System" 
        | get-edit-part -name "Logical System" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
        -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        with [get-edit-part -name "LF B " | get-edit-part -className SquareEditPart] {
            mouse-move 23 24 button1 -height 50 -width 50
            mouse-press 23 24 button1 -height 50 -width 50
            mouse-release 23 24 button1 524288 -height 50 -width 50
        }
        with [get-edit-part -name "LF B 2" | get-edit-part -className SquareEditPart] {
            mouse-move 32 23 button1 -height 50 -width 50
            mouse-press 32 23 button1 -height 50 -width 50
        }
    }
    with [get-diagram -index 1] {
        get-edit-part -name "[LAB] Logical System" | get-edit-part -name "Logical System" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part 
            -name "LF B 2" | get-edit-part -className SquareEditPart | mouse-release 32 23 button1 524288 -height 50 
            -width 50
        key-type "M2+f"
        get-edit-part -name "[LAB] Logical System" | get-edit-part -name "Logical System" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" 
            | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part 
            -name "LF B 2" | get-edit-part -name "FIP 1" | get-target-connection 0 | get-edit-part 
            -className DEdgeNameEditPart | activate-direct-edit
    }
    with [get-editbox] {
        set-text "FE BB"
        key-type Enter
    }
    with [get-diagram -index 1] {
        commit-direct-edit
        key-type Enter
        with [get-edit-part -name "[LAB] Logical System" | get-edit-part 
            -name "Logical System" | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart 
            | get-edit-part -name "LC A" | get-edit-part 
            -className DNodeContainerViewNodeContainerCompartment2EditPart] {
            mouse-move 28 12 button1 -height 86 -width 148
            mouse-press 28 12 button1 -height 86 -width 148
            mouse-release 28 12 button1 524288 -height 86 -width 148
        }
    }
}
with [get-view Properties] {
    get-property-tab Appearance | click
    get-group "Fonts and Colors:" | get-button -index 4 | click
}
set-dialog-result Color "255,0,255"
get-window -from "ColorPalettePopup.<init>()" | get-button "Custom ..." | click
with [get-editor "[LAB] Logical System" | get-diagram -index 1 | get-edit-part 
    -name "[LAB] Logical System" | get-edit-part -name "Logical System" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC A" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part -name "LF A" | get-edit-part 
    -className SquareEditPart] {
    mouse-move 14 25 button1 -height 50 -width 50
    mouse-press 14 25 button1 -height 50 -width 50
    mouse-release 14 25 button1 524288 -height 50 -width 50
}
get-view Properties | get-group "Fonts and Colors:" | get-button -index 4 | click
get-window -from "ColorPalettePopup.<init>()" | get-button -index 10 | click
with [get-editor "[LAB] Logical System" | get-diagram -index 1 | get-edit-part 
    -name "[LAB] Logical System" | get-edit-part -name "Logical System" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart] {
    mouse-move 17 3 button1 -height 87 -width 148
    mouse-press 17 3 button1 -height 87 -width 148
    mouse-release 17 3 button1 524288 -height 87 -width 148
}
get-view Properties | get-group "Fonts and Colors:" | get-button -index 4 | click
get-window -from "ColorPalettePopup.<init>()" | get-button -index 8 | click
with [get-editor "[LAB] Logical System" | get-diagram -index 1 | get-edit-part 
    -name "[LAB] Logical System" | get-edit-part -name "Logical System" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part -name "LF B " | get-edit-part 
    -className SquareEditPart] {
    mouse-move 31 24 button1 -height 50 -width 50
    mouse-press 31 24 button1 -height 50 -width 50
    mouse-release 31 24 button1 524288 -height 50 -width 50
}
with [get-view Properties | get-group "Fonts and Colors:"] {
    get-combo | select Shruti
    get-combo -index 1 | select 16
}
with [get-editor "[LAB] Logical System" | get-diagram -index 1 | get-edit-part 
    -name "[LAB] Logical System" | get-edit-part -name "Logical System" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part -name "LF B 2" | get-edit-part 
    -className SquareEditPart] {
    mouse-move 29 29 button1 -height 50 -width 50
    mouse-press 29 29 button1 -height 50 -width 50
    mouse-release 29 29 button1 524288 -height 50 -width 50
}
get-view Properties | get-group "Fonts and Colors:" | get-button -index 4 | click
set-dialog-result Color "0,255,0"
get-window -from "ColorPalettePopup.<init>()" | get-button "Custom ..." | click
with [get-editor "[LAB] Logical System" | get-diagram -index 1 | get-edit-part 
    -name "[LAB] Logical System" | get-edit-part -name "Logical System" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part -name "LF B " | get-edit-part 
    -name "FIP 1" | get-target-connection 0] {
    mouse-move 141 29 button1 -height 45 -width 224
    mouse-press 141 29 button1 -height 45 -width 224
    mouse-release 143 30 button1 524288 -height 48 -width 228
}
get-view Properties | get-group "Fonts and Colors:" | get-button -index 3 | click
get-window -from "ColorPalettePopup.<init>()" | get-button -index 11 | click
with [get-editor "[LAB] Logical System" | get-diagram -index 1 | get-edit-part 
    -name "[LAB] Logical System" | get-edit-part -name "Logical System" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "LC B" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartment2EditPart | get-edit-part -name "LF B 2" | get-edit-part 
    -name "FIP 1" | get-target-connection 0] {
    mouse-move 37 29 button1 -height 45 -width 74
    mouse-press 37 29 button1 -height 45 -width 74
    mouse-release 37 29 button1 524288 -height 45 -width 74
    mouse-move 41 29 button1 -height 45 -width 74
    mouse-press 41 29 button1 -height 45 -width 74
    mouse-release 41 29 button1 524288 -height 45 -width 74
}
get-view Properties | get-group "Fonts and Colors:" | get-button -index 4 | click
get-window -from "ColorPalettePopup.<init>()" | get-button -index 1 | click
get-button "Save All (M1+M2+S)" | click
get-view Properties | get-group "Fonts and Colors:" | get-button -index 4 | key-type "M1+a"
with [get-editor "[LAB] Logical System" | get-diagram -index 1] {
    with [get-edit-part -name "[LAB] Logical System"] {
        mouse-move 240 237 button1 -height 277 -width 596
        mouse-press 240 237 button1 -height 277 -width 596
        mouse-release 240 237 button1 524288 -height 277 -width 596
    }
    key-type "M1+a"
    with [get-edit-part -name "[LAB] Logical System" | get-edit-part 
        -name "Logical System" | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        mouse-move 245 181 button3 -height 221 -width 561
        mouse-press 245 181 button3 -height 221 -width 561
        mouse-release 245 181 button3 2097152 -height 221 -width 561
    }
    get-menu "Patterns/Create Pattern..." | click
}


with [get-window "New Pattern"] {
    get-button "New..." | click
    get-window "Modeling Patterns" | get-button OK | click
}
with [get-window "New Pattern"] {
    with [get-editbox -after [get-label "Name:"]] {
        set-text "custom pattern"
    }
}

with [get-window "New Pattern"] {
    get-tab-folder | get-tab-item Content | click
    get-group "Pattern elements" | get-tree | select "LF A  (target for: LogicalFunctions)"
    get-tab-folder | get-tab-item Advanced | click
    get-group Roles | get-list | select "Logical System : Logical System"
    get-group "Role details" | get-group "General properties" | get-editbox -after [get-label "Description:"] 
        | set-text parts
    get-group Roles | get-list | select LogicalFunctions
    with [get-group "Role details" | get-group "General properties" | get-editbox -after [get-label "Description:"]] {
        set-text "logical functions"
    }
}
with [get-window "New Pattern" | get-group "Role details"] {
    get-group "Assignment to container" | get-button "Allow assignment to container" | get-property enablement 
        | equals true | verify-true
    get-group "General properties" | get-editbox -after [get-label "Conformity Constraint"] | get-property text 
        | equals "(none)" | verify-true
    get-group "Assignment to target" | get-editbox -after [get-label "Target Derivation Rule:"] | get-property text 
        | equals "(none)" | verify-true
    get-group "Assignment to container" | get-editbox -after [get-label "Container Derivation Rule:"] 
        | get-property text | equals "(none)" | verify-true
}
get-window "New Pattern" | get-button Finish | click
get-window "Modeling Patterns" | get-label "Operation successful." | get-property caption 
    | equals "Operation successful." | verify-true
get-window "Modeling Patterns" | get-button OK | click
get-button "Save All (M1+M2+S)" | click
get-view "Capella Project Explorer" | get-tree 
    | select "patternProject/patternProject.aird/patternProject/Logical Architecture/Logical System" 
    | get-menu "New Diagram \\/ Table.../Logical Architecture Blank" | click
get-window "New Logical Architecture Blank" | get-button OK | click
with [get-editor "[LAB] Logical System" -index 1 | get-diagram -index 1] {
    with [get-edit-part -name "[LAB] Logical System" | get-edit-part 
        -name "Logical System" | get-edit-part -className DNodeContainerViewNodeContainerCompartmentEditPart] {
        mouse-move 79 40 button3 -height 68 -width 148
        mouse-press 79 40 button3 -height 68 -width 148
        mouse-release 79 40 button3 2097152 -height 68 -width 148
    }
    get-menu "Patterns/Apply Pattern..." | click
}
with [get-window "Apply Pattern"] {
    get-combo -after [get-label "Catalog:"] | select patternProject
    get-button Finish | click
}
get-window "Modeling Patterns" | get-button OK | click
get-window "Modeling Patterns" | get-button OK | click
with [get-editor "[LAB] Logical System" -index 1 | get-diagram -index 1 | get-edit-part 
    -name "[LAB] Logical System" | get-edit-part -name "Logical System" | get-edit-part 
    -className DNodeContainerViewNodeContainerCompartmentEditPart | get-edit-part -name "Logical System" 
    | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart] {
    with [get-edit-part -name "LC A" | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        with [get-figure "1/0"] {
            get-property backgroundColor | equals "#FF00FF" | verify-true
            get-property foregroundColor | equals "#4A4A97" | verify-true
        }
        with [get-edit-part -name "LF A" | get-edit-part -className SquareEditPart] {
            get-property backgroundColor | equals "#A6C198" | verify-true
            get-property foregroundColor | equals "#B0B0B0" | verify-true
        }
    }
    with [get-edit-part -name "LC B" | get-edit-part -className DNodeContainerViewNodeContainerCompartment2EditPart] {
        with [get-edit-part -name "LF B " | get-edit-part -name "FIP 1" | get-target-connection 0] {
            get-property backgroundColor | equals "#FFFFFF" | verify-true
            get-property foregroundColor | equals "#3399FF" | verify-true
        }
        with [get-edit-part -name "LF B 2" | get-edit-part -className SquareEditPart] {
            get-property backgroundColor | equals "#00FF00" | verify-true
            get-property foregroundColor | equals "#B0B0B0" | verify-true
        }
        with [get-figure "1/0"] {
            get-property backgroundColor | equals "#EDC97A" | verify-true
            get-property foregroundColor | equals "#4A4A97" | verify-true
        }
        get-edit-part -name "LF B " | get-edit-part -className SquareEditPart 
            | get-property "styles.ShapeStyle[0].fontName" | equals "Segoe UI" | verify-true
    }
}
get-button "Save All (M1+M2+S)" | click
------=_.content-0a7243a0-75d3-3d5f-9791-539de0e5b7ac--
