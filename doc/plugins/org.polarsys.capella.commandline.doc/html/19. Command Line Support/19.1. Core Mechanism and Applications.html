<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>19.1. Core Mechanism and Applications</title><link type="text/css" rel="stylesheet" href="PLUGINS_ROOT/org.polarsys.capella.doc/html/styles.css"/></head><body><h1 id="Command_Line_Support">Command Line Support</h1><h2 id="Overview">Overview</h2><p>Capella provides the capacity to launch actions from command line. Potential actions are model validation, HTML production and XML export.</p><p>The core mechanism provides the following parameters:</p><p>Mandatory parameters:</p><ul><li>appid: defines the id of the command line application to launch. Command line applications are plugins that extend the core mechanism (e.g. model validation).</li></ul><ul><li>filepath: defines the path to your aird file.</li></ul><ul><li>outputfolder: defines the path to the output folder.</li></ul><p>This behavior can be overridden by applications.</p><p><br/></p><p>Optional parameters:</p><ul><li>nosplash: launch Capella without the initial splash screen</li></ul><ul><li>consolelog: allows to log messages into the console output</li></ul><ul><li>data: defines the path to the workspace.</li></ul><ul><li>import: defines a list of the path of the Eclipse projects to import into the workspace before doing the actual job. The list have to be placed into quotes "" and separated by vertical bar '|'.</li></ul><ul><li>forceoutputfoldercreation: automatically create the output folder. If the folder already exists, this one is deleted and a new output folder is created.</li></ul><ul><li>logfile: defines the path to the log file (if not specified, log file is created in the workspace directory).</li></ul><ul><li>help: prints the help message</li></ul><p><br/></p><table border="1"><tr><td><p><img height="48" width="48" border="0" src="Images/19.1. Core Mechanism &amp; Applications_html_3c78e175.png"/></p></td><td><p><ul>
<li>Default behaviour of command line support checks that the workspace specified for validation result and HTML report generation is not in use by another instance of Eclipse.</li><br/>
<li>Be careful to use a Capella version that is compatible with the Java Runtime Environment (i.e. run Capella 32 bits on a 32 bits JVM and Capella 64 bits on 64 bits JVM).</li><br/>
<li>If the path to the aird file or the path to the workspace or the path to the log file contains white space, it should be in quotes (eg: <b>-data &ldquo;D: \Application Data\workspace&rdquo;)</b></li><br/>
<li>When Capella is run in command line, logs levels INFO, WARN, ERROR, FATAL are automatically activated for File and Console appender (regardless of the current log configuration stored in %USERPROFILE%\ReportConfiguration.xml)</li><br/>
<li>Before running below commands make sure to not have newline between each parameters to avoid copy/paste errors.</li>
</ul></p></td></tr></table><p><br/></p><h2 id="Command_Line_Application_Examples">Command Line Application Examples</h2><h3 id="Model_Validation">Model Validation</h3><p><u><b>Simple use case:</b></u></p><p><i>&lt;</i><i>CapellaInstallationPath&gt;/eclipse.exe -nosplash </i></p><p><i>-application </i><i>org.polarsys.capella.core.commandline.core</i></p><p><i>-appid </i><i>org.polarsys.capella.core.validation.commandline</i></p><p><i>-data &lt;workspacePath&gt; </i></p><p><i>-filepath /EOLE_AF/EOLE_AF.aird</i></p><p><i>-outputfolder /DocProject/validation</i></p><p><i>-logfile D:\CommandLineLog\log.html</i></p><p><br/></p><p>This command validates the model corresponding to the <i>&lt;workspacePath&gt;</i>/EOLE_AF/EOLE_AF.aird file and generates a report to the output folder <i>&lt;workspacePath&gt;</i>/DocProject/validation. </p><p><b><i>DocProject</i></b> must be a general Eclipse project (not a directory) initially created into the specified workspace, with inside a folder named <b><i>validation</i></b>. As well, <b><i>EOLE_AF</i></b> must exist as Capella project inside the same workspace.
A log file can be also specified with the parameter <b><i>-logfile</i></b></p><p><br/>
<br/></p><p><u><b>Complex use case:</b></u></p><p><i>&lt;CapellaInstallationPath&gt;/</i><i>eclipse.exe -nosplash</i></p><p><i>-application </i><i>org.polarsys.capella.core.commandline.core</i></p><p><i>-appid </i><i>org.polarsys.capella.core.validation.commandline</i></p><p><i>-filepath /EOLE_AF/EOLE_AF.aird </i></p><p><i>-outputfolder /DocProject/validation</i></p><p><i>-forceoutputfoldercreation</i></p><p><i>-validationruleset D:/EPF/exportall.epf</i></p><p><i>-validationcontext &quot;EOLE_AF/EOLE_AF.melodymodeller#971d9934-9780-4e41-b02e-312d0eac3223 </i><i>| </i></p><p><i>EOLE_AF</i><i> EOLE_AF/fragments/OA-Operational%20Context-Operational%20Entity.melodyfragment#c6aebe52-c8a4-4d35-8105-177c87470bef &quot;</i></p><p><i>-data </i><i>&lt;workspacePath&gt;</i></p><p><i>-logfile D:\CommandLineLog\log.html</i></p><p>This new command uses a <b><i>-validationruleset</i></b> parameter to specify the path to an Eclipse Property File (epf file) and a <b><i>-validationcontext</i></b> parameter to specify the set of URIs of model elements to validate. The set of rule to validate against are stored into the exported epf file.</p><p>The parameter <b><i>-forceoutputfoldercreation</i></b> becomes necessary for the following cases :</p><ul><li>If <b><i>validation</i></b> folder does not exist and <i>DocProject</i> already exist, then it will be created inside <i>DocProject</i></li><li>If either <b><i>validation</i></b> folder and <b><i>DocProject</i></b> do not exist, then <b><i>DocProject</i></b> will be created as well <b><i>validation</i></b> folder inside it.</li></ul><p>A log file is also specified.</p><p><br/>
<br/></p><h3 id="HTML_Production">HTML Production</h3><p><br/>
<br/></p><table border="1"><tr><td><p><img height="48" width="48" border="0" src="Images/19.1.%20Core%20Mechanism%20&amp;%20Applications_html_3c78e109.png"/></p></td><td><p><u>Prerequisites</u>: 				 XHTML Add-on has to be installed.</p></td></tr></table><p><br/>
<br/></p><p><u><b>Simple use case:</b></u></p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -nosplash </i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid org.polarsys.kitalpha.doc.gen.business.capella.commandline</i></p><p><i>-data &lt;workspacePath&gt;</i></p><p><i>-filepath /EOLE_AF/EOLE_AF.aird</i></p><p><i>-outputfolder /DocProject/HTML </i></p><p><i>-forceoutputfoldercreation</i></p><p>This command will generate <i>HTML</i> report from the EOLE-AF aird file specified to the output folder <b><i>HTML</i></b> present into <b><i>Doc project</i></b>.</p><p><br/></p><p><u><b>Complex use cases:</b></u></p><p><br/></p><p><b>Import Capella project and generate inside it</b></p><p><br/></p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -nosplash </i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid org.polarsys.kitalpha.doc.gen.business.capella.commandline</i></p><p><i>-data &lt;targetWorkspacePath&gt;</i></p><p><i>-import &lt;workspacePath&gt;/EOLE_AF </i></p><p><i>-filepath /EOLE_AF/EOLE_AF.aird</i></p><p><i>-outputfolder /EOLE_AF/HTML</i></p><p><i>-forceoutputfoldercreation</i></p><p><i>-logfile D:/CommandLineLog/log.html</i></p><p>This command will import the EOLE_AF project from <i>&lt;workspacePath&gt;</i> workspace into <i>&lt;targetWorkspacePath&gt; </i>workspace before generating the HTML report inside it.</p><p><br/></p><p><b>Import Capella project and generate inside a new project</b></p><p><br/></p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -nosplash </i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid org.polarsys.kitalpha.doc.gen.business.capella.commandline</i></p><p><i>-data &lt;targetWorkspacePath&gt;</i></p><p><i>-import &lt;workspacePath&gt;/EOLE_AF</i></p><p><i>-filepath /EOLE_AF/EOLE_AF.aird </i></p><p><i>-outputfolder /DocProject/HTML</i></p><p><i>-forceoutputfoldercreation</i></p><p><i>-logfile D:/CommandLineLog/log.html</i></p><p>This command will import the EOLE_AF project from <i>&lt;workspacePath&gt;</i> workspace into <i>&lt;targetWorkspacePath&gt; </i>workspace and create the DocProject to generate the HTML report inside it.</p><p><br/></p><p><b>Import Capella project and a Doc project to generate inside it</b></p><p><br/></p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -nosplash </i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid org.polarsys.kitalpha.doc.gen.business.capella.commandline</i></p><p><i>-data &lt;targetWorkspacePath&gt;</i></p><p><i>-import "&lt;workspacePath&gt;/EOLE_AF | &lt;workspacePath&gt;/DocProject" </i></p><p><i>-filepath /EOLE_AF/EOLE_AF.aird</i></p><p><i>-outputfolder /DocProject/HTML </i></p><p><i>-forceoutputfoldercreation</i></p><p><i>-logfile D:/CommandLineLog/log.html</i></p><p>This command will import two projects (EOLE_AF and DocProject) from <i>&lt;workspacePath&gt;</i> workspace into <i>&lt;targetWorkspacePath&gt; </i>workspace before generating the HTML report inside the DocProject.</p><p><b>NOTE</b>: The source and target workspaces have to be different.</p><p><br/>
<br/></p><h3 id="XML_Export">XML Export</h3><p><br/>
<br/></p><table border="1"><tr><td><p><img height="48" width="48" border="0" src="Images/19.1.%20Core%20Mechanism%20&amp;%20Applications_html_3c78e109.png"/></p></td><td><p><u>Prerequisites</u>: 				 XML Pivot Add-on has to be installed.</p></td></tr></table><p><br/>
<br/></p><p>Another Capella headless commandline application is the XML export. The following command runs an export in headless mode:</p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -consoleLog -nosplash</i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid xmlpivot.export</i></p><p><i>-filepath &lt;Path&gt;</i></p><p>The filepath argument may either be a relative or an absolute path. If it is a relative path, it is interpreted relative to the workspace. To specify an explicit workspace, you can use the <b><i>&ndash;data</i></b> parameter.</p><p><u><b>Simple use cases:</b></u></p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -consoleLog &ndash;nosplash</i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid xmlpivot.export</i></p><p><i>-filepath C:/EOLE_AF/EOLE_AF.melodymodeller</i></p><p><br/></p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -consoleLog &ndash;nosplash</i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid xmlpivot.export - filepath EOLE_AF/EOLE_AF.melodymodeller</i></p><p>This command exports a capella model into an xml file stored at <i>filepath</i> path.</p><p><br/></p><h3 id="Export_as_ZIP">Export as ZIP</h3><p><br/></p><p>This command will export selected project to the given zip filename</p><p>Mandatory parameters:</p><ul><li>export: defines the project name to export as zip</li></ul><ul><li>exportZipName: a relative path to the output zip (path must be a relative path into the given <b><i>-data </i></b> parameter)</li></ul><p><br/></p><p>(usage of &ldquo;qualifier&rdquo; in the output file name will be replaced by current date/time)</p><p><u><b>Simple use case:</b></u></p><p><i>&lt;CapellaInstallationPath&gt;/eclipse.exe -nosplash </i></p><p><i>-application org.polarsys.capella.core.commandline.core</i></p><p><i>-appid org.polarsys.capella.core.commandline.core.exportZip</i></p><p><i>-data &lt;workspacePath&gt; </i></p><p><i>-export &quot;EOLE_AF&quot;</i></p><p><i>-exportZipName &quot;/EOLE_AF/EOLE_qualifier.zip&quot;</i></p><p><i>-filepath &quot;/EOLE_AF/EOLE_AF.aird&quot; </i></p><p><i>-outputfolder &quot;/EOLE_AF/output&quot;</i></p><p><i>-forceoutputfoldercreation</i></p><p><i>-logfile &quot;D:\ CommandLineLog \log.html&quot;</i></p></body></html>